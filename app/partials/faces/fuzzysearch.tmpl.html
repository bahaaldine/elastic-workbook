<div class="feature-fuzzysearch" ng-controller="fuzzySearchCtrl as ctrl">
  <div layout="column">
      <md-content class="md-default-theme" layout-padding>
      <div layout="row" layout-align="end end">
        <div flex="80" ng-if="component.show.description">
          <p ng-bind-html="component.componentDescription"></p>
        </div>
        <div flex="20" ng-if="component.show.documentationLink">
          <md-button href="{{component.documentationLink}}" target="_blank" md-autofocus>Open documentation</md-button> 
        </div>
      </div>
    </md-content>
  </div>

  <div class="feature-fuzzysearch">
     <md-content class="md-padding">
      <form ng-submit="$event.preventDefault()">
        <md-autocomplete 
          md-selected-item-change="ctrl.querySearch(item.value)" 
          md-search-text="ctrl.searchText" 
          md-items="item in ctrl.querySearch(ctrl.searchText)" 
          md-item-text="item.display" 
          md-min-length="0" 
          placeholder="Start typing an address">
          <md-item-template>
            <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
          </md-item-template>
          <md-not-found>
            No matches found for "{{ctrl.searchText}}".
          </md-not-found>
        </md-autocomplete>
        <br>
      </form>
    </md-content>
  </div>

  <md-progress-linear md-mode="indeterminate" ng-if="esClient.busy"></md-progress-linear>
  <div layout="column" ng-if="esClient.response">
    <md-tabs md-dynamic-height md-border-bottom>
      <md-tab label="Resuts">
        <md-content class="md-padding" infinite-scroll-container='".workbook-content-container"' infinite-scroll='esClient.nextPage(request)' infinite-scroll-disabled='esClient.busy' infinite-scroll-distance='1'>
          <div layout="row" layout-align="end center">
            <h2><span>hits</span>: <span><ng-odometer value="esClient.total"></ng-odometer></span></h2>
          </div>
          <md-list class="result-items">
            <md-list-item class="md-2-line" ng-repeat="result in esClient.response">
              <div class="md-list-item-text">
                <h2 class="md-title">{{result.fields[component.searchInput][0]}}</h2>
                <p class="md-title" ng-bind-html="ctrl.toSummary(result._source)"></p>
              </div>
            </md-list-item>
          </md-list>
        </md-content>
      </md-tab>
      <md-tab label="Request" ng-if="component.show.request">
        <md-content class="md-padding" hljs source="ctrl.toPrettyJSON(esClient.request, 2)"></md-content>
      </md-tab>
      <md-tab label="Response" ng-if="component.show.response">
        <md-content class="md-padding" hljs source="ctrl.toPrettyJSON(esClient.response.slice(0, 4), 2)"></md-content>
      </md-tab>
    </md-tabs>
  </div>
</div>